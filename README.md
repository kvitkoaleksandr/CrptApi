# CrptApi ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è

## üìå –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–í —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–ª–∞—Å—Å `CrptApi`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ HTTP API. –¶–µ–ª—å ‚Äî —Å–æ–∑–¥–∞—Ç—å —É–¥–æ–±–Ω—ã–π, —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥, –±–µ–∑ –∏–∑–ª–∏—à–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, –Ω–æ —Å –æ–ø–æ—Ä–æ–π –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø—ã —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å `CrptApi` —Å–æ–¥–µ—Ä–∂–∏—Ç:

- –ú–µ—Ç–æ–¥ `createDocument(...)`, –∫–æ—Ç–æ—Ä—ã–π —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä;
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é **RateLimiter** –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤–∞—Ö Java (–±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫);
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `HttpClient` –∏–∑ JDK 11 –∏ `ObjectMapper` –∏–∑ Jackson –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JSON;
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã `Document` (—Å –±–∏–ª–¥–µ—Ä–æ–º) –∏ `CreateDocumentRequest` ‚Äî –¥–ª—è —á–∏—Å—Ç–æ–π –º–æ–¥–µ–ª–∏ –∑–∞–ø—Ä–æ—Å–∞.

---

## üîπ –ü–æ—á–µ–º—É —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤

- **–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ‚Äî –æ–Ω –∑–∞–¥–∞—ë—Ç –±–∞–∑–æ–≤—ã–π `apiUrl` –∏ —Å–æ–∑–¥–∞—ë—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `HttpClient`;
- **–í—Ç–æ—Ä–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä** –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–º–µ–Ω–∏—Ç—å `apiUrl` ‚Äî —É–¥–æ–±–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏;
- **–¢—Ä–µ—Ç–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä** ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–π, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–æ–∫ `HttpClient`. –û–Ω –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É *Dependency Injection*, —á—Ç–æ–±—ã –±—ã–ª–æ —É–¥–æ–±–Ω–æ –ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã —Å Mockito, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –±–æ–µ–≤–æ–≥–æ –∫–æ–¥–∞.

---

## üîπ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–ª–∞—Å—Å `CrptApiTest`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫—Ä—ã–≤–∞–µ—Ç:

- ‚úÖ –£—Å–ø–µ—à–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ `createDocument(...)` –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞;
- ‚ùå –û—à–∏–±–æ—á–Ω—ã–π –ø—É—Ç—å: —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500 ‚Äî –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è `IOException`.

–¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **JUnit 5 + Mockito**, –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.  
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ö–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–µ:
- AAA-–ø–æ–¥—Ö–æ–¥ (Arrange ‚Üí Act ‚Üí Assert);
- —Ç–æ—á–Ω–æ–µ –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π;
- —á–∏—Ç–∞–µ–º—ã–µ –∏ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤.

---

## üí° –ö–∞–∫ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å (–µ—Å–ª–∏ –±—ã —É—Å–ª–æ–≤–∏—è –ø–æ–∑–≤–æ–ª—è–ª–∏)

–ï—Å–ª–∏ –±—ã –∑–∞–¥–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–∞–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –ø—Ä–æ–µ–∫—Ç –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —É—Å–∏–ª–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º–∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏:

### üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ Docker/Testcontainers

- –ü–æ–¥–Ω—è—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, WireMock –∏–ª–∏ MockServer –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ);
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é JSON;
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏, —Ç–µ–ª–æ, `RateLimiter` –≤ –±–æ–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö;
- –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–∏–º–µ–Ω–∏–º –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å API.

---

### üß± –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

- –í—ã–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ApiClient` –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é `CrptApi` ‚Äî –¥–ª—è –æ–±–ª–µ–≥—á–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É;
- –í—ã–Ω–µ—Å—Ç–∏ `RateLimiter` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç;
- –†–∞–∑–¥–µ–ª–∏—Ç—å –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –Ω–∞:
  - `RequestBuilder` (—Å–±–æ—Ä–∫–∞ –∑–∞–ø—Ä–æ—Å–∞),
  - `RequestSender` (–æ—Ç–ø—Ä–∞–≤–∫–∞),
  - `RequestSerializer` (—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è) ‚Äî —ç—Ç–æ —É–ª—É—á—à–∏—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å.

---

### üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `java.util.logging` –∏–ª–∏ `SLF4J`;
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É, –æ—à–∏–±–∫–∏, –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ª–∏–º–∏—Ç–µ—Ä–∞;
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–∞—Ç—å/–≤–∫–ª—é—á–∞—Ç—å –ª–æ–≥ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é;
- –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ –≤ –ø—Ä–æ–¥–µ –∏–ª–∏ –ø—Ä–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ —Å–∏—Å—Ç–µ–º–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

---

## üí¨ –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è

- –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω **–≤—Ä—É—á–Ω—É—é**, –±–µ–∑ —à–∞–±–ª–æ–Ω–æ–≤ –∏–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏;
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **—á–∏—Å—Ç—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏—ë–º—ã** –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏;
- –ü—Ä–∏–º–µ–Ω–µ–Ω—ã **SOLID-–ø—Ä–∏–Ω—Ü–∏–ø—ã**, –≤–∫–ª—é—á–∞—è `DI`, `SRP` –∏ `OCP`;
- **–¢–µ—Å—Ç—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ**, –ª–µ–≥–∫–æ —á–∏—Ç–∞—é—Ç—Å—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è;
- –ö–∞–∂–¥—ã–π –≤—ã–±–æ—Ä –≤ –ø—Ä–æ–µ–∫—Ç–µ –º–æ–∂–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å ‚Äî —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è.
